<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EtcPal: thread (Threading)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="etcdevtool.css" rel="stylesheet" type="text/css"/>
<link href="etcpal_dox_styles.css" rel="stylesheet" type="text/css"/>
<!-- BEGIN CUSTOM SCRIPTS -->
<!-- BEGIN ETCDEVTOOL VERSION SELECTOR SCRIPT -->
<script type="text/javascript">
  $(function () {
    $.get('/EtcPalDocs/versions.txt', function (data) {
      if (data) {
        var lines = data.split('\n');
        if (lines.length > 0) {
          var version_select = $("#version_select").empty();
          lines.forEach(function (line) {
            line = line.trim();
            if (!line) {
              return;
            }
            line = line.split(':');
            var option_name = line[0].replace(/^v/, '');
            if (line.length > 1) {
              option_name += ' (' + line[1] + ')';
            }
            var option_val = '/EtcPalDocs/' + line[0];
            var option = $('<option></option>').attr("value", option_val)
              .text(option_name);
            if (window.location.pathname.match(line[0])) {
              option = option.attr("selected", "selected");
            }
            version_select.append(option);
          });
        }
      }
    }, 'text');
  });
</script>
<!-- END ETCDEVTOOL VERSION SELECTOR SCRIPT -->
<script type="text/javascript">
  $(function () { selectAllC() });
</script>
<script type="text/javascript">
  function selectAllC() {
    // Enable all C-language blocks
    var tabcontent = document.getElementsByClassName("code-tab-content");
    for (i = 0; i < tabcontent.length; i++) {
      if (tabcontent[i].id.endsWith("_c")) {
        tabcontent[i].style.display = "block";
      } else {
        tabcontent[i].style.display = "none"
      }
    }
    // Enable all C-language buttons
    var tablinks = document.getElementsByClassName("code-tab-links");
    for (i = 0; i < tablinks.length; i++) {
      if (tablinks[i].id.endsWith("_c")) {
        if (!tablinks[i].className.includes("active")) {
          tablinks[i].className = tablinks[i].className += " active";
        }
      } else {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
      }
    }
  }
  function selectAllCpp() {
    // Enable all C++-language blocks
    var tabcontent = document.getElementsByClassName("code-tab-content");
    for (i = 0; i < tabcontent.length; i++) {
      if (tabcontent[i].id.endsWith("_cpp")) {
        tabcontent[i].style.display = "block";
      } else {
        tabcontent[i].style.display = "none"
      }
    }
    // Enable all C++-language buttons
    var tablinks = document.getElementsByClassName("code-tab-links");
    for (i = 0; i < tablinks.length; i++) {
      if (tablinks[i].id.endsWith("_cpp")) {
        if (!tablinks[i].className.includes("active")) {
          tablinks[i].className = tablinks[i].className += " active";
        }
      } else {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
      }
    }
  }
  function selectLanguage(evt, block_id, language) {
    // Get all elements with class="tabcontent" and hide them
    var tabcontent = document.getElementsByClassName("code-tab-content");
    for (i = 0; i < tabcontent.length; i++) {
      if (tabcontent[i].id.startsWith("div_" + block_id)) {
        tabcontent[i].style.display = "none";
      }
    }
    // Get all elements with class="tablinks" and remove the class "active"
    var tablinks = document.getElementsByClassName("code-tab-links");
    for (i = 0; i < tablinks.length; i++) {
      if (tablinks[i].id.startsWith("button_" + block_id)) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
      }
    }
    // Show the current tab, and add an "active" class to the button that opened the tab
    document.getElementById("div_" + block_id + "_" + language).style.display = "block";
    if (!evt.currentTarget.className.includes("active")) {
      evt.currentTarget.className += " active";
    }
  }
</script>
<!-- END CUSTOM SCRIPTS -->
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">EtcPal
   &#160;<span id="projectnumber">0.4.1</span>
   </div>
   <div id="projectbrief">ETC Platform Abstraction Layer (EtcPal)</div>
  </td>
  <!-- BEGIN VERSION SELECTOR INSERTED BY ETCDEVTOOL -->
  <td style="text-align: right; padding-right: 0.5em">
    <div id="otherversions">
      View other versions:
      <select id="version_select" onchange="location = this.value">
      </select>
    </div>
  </td>
  <!-- END VERSION SELECTOR INSERTED BY ETCDEVTOOL -->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__etcpal__cpp__thread.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a>  </div>
  <div class="headertitle">
<div class="title">thread (Threading)<div class="ingroups"><a class="el" href="group__etcpal.html">EtcPal</a> &raquo; <a class="el" href="group__etcpal__cpp.html">C++ Wrappers</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Overview</h2>
<p>C++ utilities for the <a class="el" href="group__etcpal__thread.html">thread (Threading)</a> module. </p>
<p>Provides a thread class <a class="el" href="classetcpal_1_1_thread.html" title="A thread class, modeled after std::thread.">Thread</a> which is similar to std::thread, with the key advantage that it will work on any threaded platform that EtcPal is ported for, including the embedded RTOS platforms. If your application or library does not need to run on these platforms, consider using std::thread instead (or in &gt;= C++20, std::jthread, which more closely matches the behavior of this class).</p>
<p>To start the thread with default parameters, you can use the constructor: </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> MyThreadFunction()</div>
<div class="line">{</div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;Hello from a thread!\n&quot;</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code" href="classetcpal_1_1_thread.html">etcpal::Thread</a> thread(MyThreadFunction); <span class="comment">// Thread is now running</span></div>
<div class="line"><span class="comment">// Thread will be automatically joined when thread goes out of scope, or join it explicitly:</span></div>
<div class="line">thread.Join();</div>
<div class="ttc" id="aclassetcpal_1_1_thread_html"><div class="ttname"><a href="classetcpal_1_1_thread.html">etcpal::Thread</a></div><div class="ttdoc">A thread class, modeled after std::thread.</div><div class="ttdef"><b>Definition:</b> thread.h:143</div></div>
</div><!-- fragment --><p>The value constructor will throw an <a class="el" href="classetcpal_1_1_error.html" title="A wrapper class for the EtcPal error type.">etcpal::Error</a> object if the thread fails to start for any reason. To avoid an exception-handling approach, you can default-construct and use the Start() function: </p><div class="fragment"><div class="line"><a class="code" href="classetcpal_1_1_thread.html">etcpal::Thread</a> thread;</div>
<div class="line"><a class="code" href="classetcpal_1_1_error.html">etcpal::Error</a> start_result = thread.<a class="code" href="classetcpal_1_1_thread.html#a63e85f031a9b180d9e932df21f7a2e64">Start</a>(MyThreadFunction);</div>
<div class="line"><span class="keywordflow">if</span> (start_result)</div>
<div class="line">{</div>
<div class="line">  <span class="comment">// Thread is running, yay!</span></div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">else</span></div>
<div class="line">{</div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;Error starting thread: &quot;</span> &lt;&lt; start_result.<a class="code" href="classetcpal_1_1_error.html#a19c380b03cea21d7ac7325136a131ff0">ToString</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line">}</div>
<div class="ttc" id="aclassetcpal_1_1_error_html"><div class="ttname"><a href="classetcpal_1_1_error.html">etcpal::Error</a></div><div class="ttdoc">A wrapper class for the EtcPal error type.</div><div class="ttdef"><b>Definition:</b> error.h:94</div></div>
<div class="ttc" id="aclassetcpal_1_1_error_html_a19c380b03cea21d7ac7325136a131ff0"><div class="ttname"><a href="classetcpal_1_1_error.html#a19c380b03cea21d7ac7325136a131ff0">etcpal::Error::ToString</a></div><div class="ttdeci">std::string ToString() const</div><div class="ttdoc">Get a descriptive string for this Error as a std::string.</div><div class="ttdef"><b>Definition:</b> error.h:144</div></div>
<div class="ttc" id="aclassetcpal_1_1_thread_html_a63e85f031a9b180d9e932df21f7a2e64"><div class="ttname"><a href="classetcpal_1_1_thread.html#a63e85f031a9b180d9e932df21f7a2e64">etcpal::Thread::Start</a></div><div class="ttdeci">Error Start(Function &amp;&amp;func, Args &amp;&amp;... args)</div><div class="ttdoc">Associate this thread object with a new thread of execution.</div><div class="ttdef"><b>Definition:</b> thread.h:425</div></div>
</div><!-- fragment --><p>This approach also lets you set non-default thread parameters before starting; method-chaining syntax is available on these setters: </p><div class="fragment"><div class="line"><a class="code" href="classetcpal_1_1_thread.html">etcpal::Thread</a> thread;</div>
<div class="line"><a class="code" href="classetcpal_1_1_error.html">etcpal::Error</a> start_result = thread.<a class="code" href="classetcpal_1_1_thread.html#ae6cedd23a7b2b24f90059df894846864">SetName</a>(<span class="stringliteral">&quot;My Thread&quot;</span>)</div>
<div class="line">                                    .<a class="code" href="classetcpal_1_1_thread.html#ac83a10f16662668e1d8a494ddb6e1234">SetPriority</a>(4)</div>
<div class="line">                                    .<a class="code" href="classetcpal_1_1_thread.html#a3cb4d6197b72897c0ceba341f7beff4b">SetStackSize</a>(4000)</div>
<div class="line">                                    .<a class="code" href="classetcpal_1_1_thread.html#a63e85f031a9b180d9e932df21f7a2e64">Start</a>(MyThreadFunction);</div>
<div class="ttc" id="aclassetcpal_1_1_thread_html_a3cb4d6197b72897c0ceba341f7beff4b"><div class="ttname"><a href="classetcpal_1_1_thread.html#a3cb4d6197b72897c0ceba341f7beff4b">etcpal::Thread::SetStackSize</a></div><div class="ttdeci">Thread &amp; SetStackSize(unsigned int stack_size) noexcept</div><div class="ttdoc">Set the stack size of this thread in bytes.</div><div class="ttdef"><b>Definition:</b> thread.h:341</div></div>
<div class="ttc" id="aclassetcpal_1_1_thread_html_ac83a10f16662668e1d8a494ddb6e1234"><div class="ttname"><a href="classetcpal_1_1_thread.html#ac83a10f16662668e1d8a494ddb6e1234">etcpal::Thread::SetPriority</a></div><div class="ttdeci">Thread &amp; SetPriority(unsigned int priority) noexcept</div><div class="ttdoc">Set the priority of this thread.</div><div class="ttdef"><b>Definition:</b> thread.h:328</div></div>
<div class="ttc" id="aclassetcpal_1_1_thread_html_ae6cedd23a7b2b24f90059df894846864"><div class="ttname"><a href="classetcpal_1_1_thread.html#ae6cedd23a7b2b24f90059df894846864">etcpal::Thread::SetName</a></div><div class="ttdeci">Thread &amp; SetName(const char *name) noexcept</div><div class="ttdoc">Set the name of this thread.</div><div class="ttdef"><b>Definition:</b> thread.h:355</div></div>
</div><!-- fragment --><p>Pass arguments to your thread function, which will be stored on the heap: </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> MyThreadFunction(<span class="keywordtype">int</span> value)</div>
<div class="line">{</div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;The value is &quot;</span> &lt;&lt; value &lt;&lt; <span class="stringliteral">&quot;.\n&quot;</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code" href="classetcpal_1_1_thread.html">etcpal::Thread</a> thread(MyThreadFunction, 5); <span class="comment">// Thread will print &quot;The value is 5.&quot;</span></div>
</div><!-- fragment --><p>You can even use lambdas for quick-and-dirty operations: </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> value = 42;</div>
<div class="line"><a class="code" href="classetcpal_1_1_thread.html">etcpal::Thread</a> thread([=]() { std::cout &lt;&lt; <span class="stringliteral">&quot;The value is &quot;</span> &lt;&lt; value &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>; });</div>
</div><!-- fragment --><p>The <a class="el" href="classetcpal_1_1_thread.html" title="A thread class, modeled after std::thread.">Thread</a> class also provides static Sleep() functions, which can be used as a platform-neutral sleep. </p><div class="fragment"><div class="line"><a class="code" href="classetcpal_1_1_thread.html#abc8bb8ec9948b769e1189506ed635c9d">etcpal::Thread::Sleep</a>(20); <span class="comment">// Sleep for 20 milliseconds</span></div>
<div class="line"><a class="code" href="classetcpal_1_1_thread.html#abc8bb8ec9948b769e1189506ed635c9d">etcpal::Thread::Sleep</a>(std::chrono::seconds(2)); <span class="comment">// Sleep for 2 seconds</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// In a C++14 or greater environment, you can also...</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span>std::chrono_literals;</div>
<div class="line"> </div>
<div class="line"><a class="code" href="classetcpal_1_1_thread.html#abc8bb8ec9948b769e1189506ed635c9d">etcpal::Thread::Sleep</a>(1min); <span class="comment">// Sleep for 1 minute</span></div>
<div class="ttc" id="aclassetcpal_1_1_thread_html_abc8bb8ec9948b769e1189506ed635c9d"><div class="ttname"><a href="classetcpal_1_1_thread.html#abc8bb8ec9948b769e1189506ed635c9d">etcpal::Thread::Sleep</a></div><div class="ttdeci">static void Sleep(unsigned int ms) noexcept</div><div class="ttdoc">Blocks the current thread for the specified number of milliseconds.</div><div class="ttdef"><b>Definition:</b> thread.h:491</div></div>
</div><!-- fragment --><p><b>IMPORTANT NOTE FOR RTOS USERS:</b> The EtcPal threading API does not initialize the scheduler on real-time systems (e.g. it does not call vTaskStartScheduler() on FreeRTOS or _mqx() on MQX). The application writer is responsible for managing the interaction between starting the scheduler and starting EtcPal threads, just like when starting native RTOS tasks. </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classetcpal_1_1_thread.html">Thread</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A thread class, modeled after std::thread.  <a href="classetcpal_1_1_thread.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
